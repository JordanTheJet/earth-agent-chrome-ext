# Dataset Context Configuration

This directory contains configuration files for injecting dataset-specific context into the Earth Engine Assistant system prompt.

## Usage

### Adding a new dataset context

1. Edit `dataset-context.ts` and add a new entry to `DATASET_CONTEXTS`:

```typescript
export const DATASET_CONTEXTS: Record<string, DatasetContext> = {
  handheld_spectra_us: {
    name: "Handheld Spectra US",
    assetPath: "projects/sundai-woodwell-soil/assets/handheld_spectra_us",
    description: "Handheld spectral measurements dataset for soil analysis",
    bands: ["reflectance", "wavelength", "location"],
    sampleCode: `var data = ee.FeatureCollection('projects/sundai-woodwell-soil/assets/handheld_spectra_us');`,
    usageNotes: "Use for soil spectral analysis and validation."
  },
  // Add your new dataset here
  my_new_dataset: {
    name: "My New Dataset",
    assetPath: "projects/my-project/assets/my-dataset",
    description: "Description of the dataset",
    // ... other properties
  }
};
```

### Changing the default dataset

To change which dataset is used by default, modify the `DEFAULT_DATASET_CONTEXT` export:

```typescript
export const DEFAULT_DATASET_CONTEXT = DATASET_CONTEXTS.my_new_dataset;
```

### Using a specific dataset context programmatically

```typescript
import { generateSystemPrompt } from '../background/chat-handler';

// Generate prompt with specific dataset
const promptWithMyDataset = generateSystemPrompt('my_new_dataset');

// Generate prompt with default dataset
const promptWithDefault = generateSystemPrompt();
```

## Current Configuration

The current default dataset is: **Handheld Spectra US**
- Asset Path: `projects/sundai-woodwell-soil/assets/handheld_spectra_us`
- Used for soil spectral analysis across the United States

## System Prompt Structure

The complete system prompt is generated by combining:
1. Base GEE system prompt (core functionality and workflows)
2. Dataset context (injected based on configuration)

The dataset context includes:
- Dataset name and description
- Asset path for easy copy-paste in code examples
- Available bands/properties
- Sample code snippets
- Usage notes and recommendations